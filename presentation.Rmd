---
title: Adopting open source practices <br/> for better science
author: |
  Pierce Edmiston  
  <pedmiston@wisc.edu>  
  [sapir.psych.wisc.edu](http://sapir.psych.wisc.edu)  
  [github.com/pedmiston](https://github.com/pedmiston)
output:
  xaringan::moon_reader
---

```{r, include=FALSE}
library(knitr)
opts_chunk$set(echo = FALSE, message = FALSE)
read_chunk("presentation.R")
knitLiteral::kast_on()
```

```{r setup}
```

---
# Outline

Open source practices that make for more reproducible science:

1. Version control
2. Dynamic documents
3. Building from source

Conclusion: It's worth it!

---
# Why I care about reproducibility

<small>Open Science Collaboration. 2015. Estimating the reproducibility of psychological science. _Science_. [url](http://science.sciencemag.org/content/349/6251/aac4716).</small>

```{r}
img("refs/osc_2015_science/fig3.png", draw = TRUE)
```

???

> Scientific claims should not gain credence because of the status or authority of their originator but by the replicability of their supporting evidence.

---
# Why isn't psychological research reproducible?

- Simmons, Nelson, & Simonsohn. (2011). False-positive psychology: undisclosed flexibility in data collection and analysis allows presenting anything as significant. _Psychological Science_. [url](http://doi.org/10.1177/0956797611417632).
- Gelman & Loken (2013). The garden of forking paths: Why multiple comparisons can be a problem, even when there is no “fishing expedition” or “p-hacking” and the research hypothesis was posited ahead of time. Unpublished manuscript. [url](http://www.stat.columbia.edu/~gelman/research/unpublished/p_hacking.pdf).
- Palmeri, K. 2016. Psychology is in crisis over whether it's in crisis. _WIRED_. [url](https://www.wired.com/2016/03/psychology-crisis-whether-crisis/).
- Ioannidis, J. 2005. Why most published research findings are false. _PLOS Medicine_. [url](http://dx.doi.org/10.1371/journal.pmed.0020124).

---
# What's the solution?

- Better statistics
- Preregistration
- Incentivize replications
- **Do science in the open**

> Sunshine is the best disinfectant.

---
# Why open source is the answer

> My collaborators should be able to reproduce my research.  
> Anyone should be able to use and contribute to this project.

---
# Version control

```{r, fig.width=12, fig.cap="Version control in the wild."}
grid.arrange(img("undo-button"), img("wiki-revisions"), img("git-log"), nrow = 1)
```

---
# Tools for climbing

```{r}
img("climbing-tools", ".jpg", draw = TRUE)
```

---
# Pick your poison

- **git**
- mercurial
- subversion

???

My requirements for choosing version control system are that it is **open source** and supports **distributed** collaboration and merge operations, which most modern VCSs do.

---
# Forks and branches

```{r}
DiagrammeR::grViz("
digraph {
  rankdir = LR;
  node[label = ''];
  m0 -> m1 -> m2 -> m3;
  b0, b1[style = invis];
  b0 -> b1 -> b2[style = invis];
  b2 -> b3;
  m1 -> b2[constraint = false];
}", height = 200)
```

---
# Submodules

    talk or publication/
    ├── research_project_1
    └── research_project_2

    meta-analysis/
    ├── research_project_1
    ├── ...
    └── research_project_n

    project/
    ├── *web-app*  -> also installed on web server
    ├── *psychopy* -> also installed on lab computers
    ├── *r-pkg*    -> installed by anyone who wants the data
    ├── conference
    └── journal

---
# Dynamic documents

---
# Origins of dynamic documents

## Don't Repeat Yourself (DRY)

> Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.

- Hunt & Thomas, 1999, _The pragmatic programmer_. [wiki](https://en.wikipedia.org/wiki/The_Pragmatic_Programmer).

## Literate programming (LP)

Knuth, Donald E. (1983). _Literate programming_. [wiki](https://en.wikipedia.org/wiki/Literate_programming).

* Intermingle prose and code for better understanding of the program.
* The explanation of a program does not need to resemble the program structure.

---
# Sphinx

## Python Documentation Generation

* Python standard library: [json](https://docs.python.org/3/library/json.html)
* Third party package: [requests](http://docs.python-requests.org/en/master/api/#requests.request)

---
# Project Jupyter

```{r}
img("jupyter-preview", draw = TRUE)
```

---
# Knitr

## Elegant, flexible and fast dynamic report generation with R

Participants in condition A outperformed participants in condition B, `report_model_results(mod, param = "condition")`.

---
# Knitr (continued):

No more copying static image files!

    `\`\`\``  
    `{r eval=FALSE}`  
    `plot(df)`  
    `\`\`\``

---
# Dynamic documents in science

- Supplemental materials
- Entire manuscripts

> Using dynamic documentation enforces reproducibility, facilitates replication efforts, and encourages the extension of research projects beyond publication.

---
# Building from source
